"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[276],{4276:(H,T,a)=>{a.r(T),a.d(T,{FinancialModule:()=>X});var r=a(6895),c=a(4258),t=a(4650);let p=(()=>{class e{constructor(){this.icon="pi-users"}ngOnInit(){null!=this.index&&null!=this.index&&(this.color=e.colors[this.index%3])}}return e.colors=["blue","orange","green","purple"],e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-amount"]],inputs:{color:"color",title:"title",subTitle:"subTitle",icon:"icon",value:"value",index:"index"},standalone:!0,features:[t.jDz],decls:11,vars:17,consts:[[1,"card","p-0","overflow-hidden","flex","flex-column"],[1,"flex","align-items-center","p-3"],[1,"ml-3"],["alt","users",1,"w-full",3,"src"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i"),t.TgZ(3,"div",2)(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA()()(),t._UZ(10,"img",3),t.qZA()),2&n&&(t.xp6(2),t.MT6("pi ",o.icon," text-7xl text-",o.color,"-500"),t.xp6(2),t.Gre("text-",o.color,"-500 m-1 block text-xl white-space-nowrap"),t.xp6(1),t.Oqu(o.title),t.xp6(1),t.Gre("text-",o.color,"-500 block text-3xl font-bold"),t.xp6(1),t.Oqu(o.value),t.xp6(1),t.Gre("text-",o.color,"-200 block text-md white-space-nowrap"),t.xp6(1),t.hij("",o.subTitle," "),t.xp6(1),t.MGl("src","assets/images/dashboard/",o.color,".svg",t.LSH))},dependencies:[r.ez]}),e})();var u=a(9268),M=a(690),I=a(9337),h=a(8794),v=a(7489),Z=a(3905),d=a(805),_=a(2210),x=a(5593),A=a(5047),m=a(433);function b(e,i){if(1&e&&(t.TgZ(0,"div")(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.location),t.xp6(2),t.hij("",n.amount,"$")}}function q(e,i){if(1&e&&(t.TgZ(0,"div")(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.location),t.xp6(2),t.hij("",n.amount,"$")}}const y=function(){return{width:"100%"}};let w=(()=>{class e{constructor(n,o){this.apiService=n,this.messageService=o,this.loading=!1}applyTransfer(){!this.valueToTransfer||this.valueToTransfer>this.sourceAccount.amount?this.messageService.add({key:"homeToast",severity:"error",life:7e3,summary:"",detail:"Insufficient Amount In The Destination Account !"}):(this.loading=!0,(0,Z.z)(this.apiService.transferMoney(this.valueToTransfer,this.sourceAccount,this.destinationAccount)).then(n=>{n&&(this.messageService.add({key:"homeToast",severity:"success",life:7e3,summary:"Done",detail:this.valueToTransfer+"$ Successfuly Transfered To"+this.destinationAccount.name+" Account In  "+this.destinationAccount.location}),this.valueToTransfer=0)}).finally(()=>this.loading=!1))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.s),t.Y36(d.ez))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-money-transfer"]],inputs:{accounts:"accounts"},decls:18,vars:13,consts:[[1,"card"],[1,"pi","pi-arrow-right-arrow-left","text-2xl","font-bold"],[1,"font-bold","text-color-secondary","mt-4"],["optionLabel","name","appendTo","body","autoWidth","false",3,"options","ngModel","autoDisplayFirst","ngModelChange"],["pTemplate","item"],["optionLabel","name","appendTo","body","autoWidth","false",3,"options","ngModel","ngModelChange"],[1,"mt-8"],[1,"p-inputgroup"],["mode","currency","currency","USD","locale","en-US",3,"ngModel","ngModelChange"],["type","button","pButton","","pRipple","","label","Transfer",3,"loading","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._UZ(2,"i",1),t._uU(3," Money Transfer "),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Source "),t.qZA(),t.TgZ(6,"p-dropdown",3),t.NdJ("ngModelChange",function(l){return o.sourceAccount=l}),t.YNc(7,b,7,3,"ng-template",4),t.qZA(),t.TgZ(8,"div",2),t._uU(9," Destination "),t.qZA(),t.TgZ(10,"p-dropdown",5),t.NdJ("ngModelChange",function(l){return o.destinationAccount=l}),t.YNc(11,q,7,3,"ng-template",4),t.qZA(),t.TgZ(12,"div",6)(13,"div",2),t._uU(14," Amount "),t.qZA(),t.TgZ(15,"div",7)(16,"p-inputNumber",8),t.NdJ("ngModelChange",function(l){return o.valueToTransfer=l}),t.qZA(),t.TgZ(17,"button",9),t.NdJ("click",function(){return o.applyTransfer()}),t.qZA()()()()),2&n&&(t.xp6(6),t.Akn(t.DdM(11,y)),t.Q6J("options",o.accounts)("ngModel",o.sourceAccount)("autoDisplayFirst",!1),t.xp6(4),t.Akn(t.DdM(12,y)),t.Q6J("options",o.accounts)("ngModel",o.destinationAccount),t.xp6(6),t.Q6J("ngModel",o.valueToTransfer),t.xp6(1),t.Q6J("loading",o.loading))},dependencies:[d.jx,_.Lt,x.Hq,A.Rn,m.JJ,m.On]}),e})();function O(e,i){if(1&e&&(t.TgZ(0,"div",9),t._UZ(1,"app-amount",10),t.qZA()),2&e){const n=i.$implicit,o=i.index;t.xp6(1),t.Q6J("title",n.name)("index",o)("subTitle",n.location)("value",n.amount)}}function D(e,i){1&e&&(t.ynx(0),t._UZ(1,"p-skeleton",11),t.BQk())}function J(e,i){if(1&e&&t._UZ(0,"p-chart",12),2&e){const n=t.oxw();t.Q6J("data",n.stackedData)("options",n.stackedOptions)}}function S(e,i){if(1&e&&(t.TgZ(0,"div",13),t._UZ(1,"app-money-transfer",14),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("accounts",n.accounts)}}let F=(()=>{class e{constructor(n,o,s){this.apiService=n,this.commonService=o,this.utilsService=s,this.loading=!0}ngOnInit(){this.apiService.getAccountsList().subscribe(n=>{this.accounts=n,this.stackedData={labels:["Accounts"],datasets:[]};let o,s=0;n.forEach(l=>{o=this.utilsService.getColorByColorName(p.colors[s++%3]),this.stackedData.datasets.push({type:"bar",label:l.name,backgroundColor:this.utilsService.transparentize(o,.3),borderColor:o,data:[l.amount],barThickness:80,borderWidth:2,borderRadius:{topLeft:10,bottomRight:10},borderSkipped:!1})}),this.loading=!1}),this.stackedOptions={plugins:{tooltips:{mode:"index",intersect:!1}},scales:{x:{stacked:!1,ticks:{color:"#495057"},grid:{color:"#ebedef"}},y:{stacked:!0,ticks:{color:"#495057",callback:n=>n+"$"},grid:{color:"#ebedef"}}}}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.s),t.Y36(M.v),t.Y36(I.F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dantel-accounts"]],decls:10,vars:4,consts:[[1,"grid","m-2","lg:m-4"],[1,"grid","col-12","lg:col-4"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12","lg:col-8"],[1,"card","flex","justify-content-center"],[1,"w-25rem","h-25rem","max-w-screen"],[4,"ngIf","ngIfElse"],["loaded",""],["class","col-12 lg:col-4",4,"ngIf"],[1,"col-12"],["icon","pi-wallet",3,"title","index","subTitle","value"],["width","100%","height","100%"],["type","bar","width","100%","height","100%",3,"data","options"],[1,"col-12","lg:col-4"],[3,"accounts"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,O,2,4,"div",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.YNc(6,D,2,0,"ng-container",6),t.YNc(7,J,1,2,"ng-template",null,7,t.W1O),t.qZA()()(),t.YNc(9,S,2,1,"div",8),t.qZA()),2&n){const s=t.MAs(8);t.xp6(2),t.Q6J("ngForOf",o.accounts),t.xp6(4),t.Q6J("ngIf",o.loading)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",o.commonService.hasManagerRole)}},dependencies:[r.sg,r.O5,h.C,v.O,p,w]}),e})();var g=a(1765);const N=["dt"];function R(e,i){1&e&&(t.TgZ(0,"tr")(1,"th")(2,"div",9),t._uU(3,"In/Out"),t.qZA()(),t.TgZ(4,"th")(5,"div",9),t._uU(6,"Amount"),t.qZA()(),t.TgZ(7,"th")(8,"div",9),t._uU(9,"Source"),t.qZA()(),t.TgZ(10,"th")(11,"div",9),t._uU(12,"Destination"),t.qZA()(),t.TgZ(13,"th")(14,"div",9),t._uU(15,"Transaction Type"),t.qZA()(),t.TgZ(16,"th")(17,"div",9),t._uU(18," Date "),t._UZ(19,"p-columnFilter",10),t.qZA()()())}function j(e,i){if(1&e&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.sourcePerson.fullName," ")}}function Q(e,i){if(1&e&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;let o;t.xp6(1),t.hij(" ",null!==(o=n.sourceCompany.name)&&void 0!==o?o:""," ")}}function Y(e,i){if(1&e&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.destinationPerson.fullName," ")}}function $(e,i){if(1&e&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;let o;t.xp6(1),t.hij(" ",null!==(o=n.destinationCompany.name)&&void 0!==o?o:""," ")}}const k=function(e,i,n){return{"text-red-500 pi-caret-up":e,"text-green-500 pi-caret-down":i,"text-primary":n}};function L(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td")(2,"div",9),t._UZ(3,"i",11),t.qZA()(),t.TgZ(4,"td")(5,"div",9),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t.YNc(8,j,2,1,"div",12),t.YNc(9,Q,2,1,"div",12),t.qZA(),t.TgZ(10,"td"),t.YNc(11,Y,2,1,"div",12),t.YNc(12,$,2,1,"div",12),t.qZA(),t.TgZ(13,"td")(14,"div",9),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"div",9),t._uU(18),t.ALo(19,"date"),t.qZA()()()),2&e){const n=i.$implicit;t.xp6(3),t.Q6J("ngClass",t.kEZ(11,k,n.transactionType.isOutcome,n.transactionType.isIncome,!n.transactionType.isOutcome&&!n.transactionType.isIncome)),t.xp6(3),t.hij(" ",n.value,"$ "),t.xp6(2),t.Q6J("ngIf",n.sourcePerson),t.xp6(1),t.Q6J("ngIf",n.sourceCompany),t.xp6(2),t.Q6J("ngIf",n.destinationPerson),t.xp6(1),t.Q6J("ngIf",n.destinationCompany),t.xp6(3),t.hij(" ",n.transactionType.name," "),t.xp6(3),t.hij(" ",t.xi3(19,8,n.entryDate,"dd-MM-yyyy")," ")}}function P(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td",13),t._uU(2,"Total"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",13),t._uU(6,"Total In"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",13),t._uU(10,"Total Out"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&e){const n=t.oxw();t.xp6(4),t.Oqu(n.visibleRowsCount),t.xp6(4),t.hij("",n.totalIncome,"$"),t.xp6(4),t.hij("",n.totalOutcome,"$")}}const z=function(){return[10,25,50,100]},B=[{path:"DantelAccounts",component:F},{path:"Transactions",component:(()=>{class e{constructor(n){this.apiService=n,this.loading=!0,this._firstIndex=0,this.pageRowsLength=10,this.totalIncome=0,this.totalOutcome=0,this.visibleRowsCount=10}ngOnInit(){(0,Z.z)(this.apiService.getTransactionlogsList()).then(n=>{this.transactions=n}).finally(()=>this.loading=!1)}get firstIndex(){return this._firstIndex}set firstIndex(n){this._firstIndex=n,this.calculateTotals()}calculateTotals(){if(!this.transactions)return;let n,s,l,o=this.pageRowsLength,C=0,U=0;n=this.dt&&this.dt.filteredValue?this.dt.filteredValue:this.transactions,n.length<o+this.firstIndex&&(o=n.length-this.firstIndex),s=this.firstIndex+o;for(var f=this.firstIndex;f<s;f++)l=n[f],l.transactionType.isIncome?C+=l.value:l.transactionType.isOutcome&&(U+=l.value);this.totalIncome=C,this.totalOutcome=U,this.visibleRowsCount=o}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.s))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-transactions"]],viewQuery:function(n,o){if(1&n&&t.Gf(N,5),2&n){let s;t.iGM(s=t.CRH())&&(o.dt=s.first)}},decls:11,vars:8,consts:[[1,"grid","m-2","lg:m-4"],[1,"col-12"],[1,"card"],[1,"pi","pi-users","text-2xl","font-bold"],["dataKey","id","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} transactions",3,"value","loading","paginator","rows","first","rowsPerPageOptions","showCurrentPageReport","rowsChange","firstChange","onFilter"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"flex","justify-content-center"],["type","date","field","entryDate","display","menu",1,"ml-auto"],[1,"pi","font-bold","pi-caret-right",3,"ngClass"],["class","flex justify-content-center",4,"ngIf"],[1,"text-right"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._UZ(4,"i",3),t._uU(5," All Transactions "),t.qZA(),t.TgZ(6,"p-table",4,5),t.NdJ("rowsChange",function(l){return o.pageRowsLength=l})("firstChange",function(l){return o.firstIndex=l})("onFilter",function(){return o.calculateTotals()}),t.YNc(8,R,20,0,"ng-template",6),t.YNc(9,L,20,15,"ng-template",7),t.YNc(10,P,13,3,"ng-template",8),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("value",o.transactions)("loading",o.loading)("paginator",!0)("rows",o.pageRowsLength)("first",o.firstIndex)("rowsPerPageOptions",t.DdM(7,z))("showCurrentPageReport",!0))},dependencies:[r.mk,r.O5,d.jx,g.iA,g.xl,r.uU]}),e})()}];let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(B),c.Bz]}),e})();var W=a(4247),E=a(1740);let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.ez,c.Bz,G,h.S,v.m,W.d,_.kW,x.hJ,E.j,A.L$,m.u5,g.U$,p]}),e})()}}]);